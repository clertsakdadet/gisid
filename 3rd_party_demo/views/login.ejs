<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>Demo Site :)</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="../demo/css/normalize.css">
  <link rel="stylesheet" href="../demo/css/skeleton.css">
  <link rel="stylesheet" href="../demo/css/custom.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href="images/favicon.png">

</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div class="container">
      <section class="header">
          <h2 class="title">GIS ID</h2>
      </section>
      <form>
          <div class="row">
            <div class="six columns">
              <label for="exampleEmailInput">Your email</label>
              <input class="u-full-width" type="email" placeholder="test@mailbox.com" id="emailInput">
            </div>
          </div>
          <div class="row">
              <div class="six columns">
                  <div class="six columns">
                      <label for="exampleEmailInput">Your password</label>
                      <input class="u-full-width" type="password" placeholder="" id="passwordInput">
                    </div>
              </div>
            </div>
            <div style="width:100%;text-align:center;">
                <input id="loginBtn" class="button-primary" type="button" value="Sign in">
            </div>
        </form>        
  </div>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script>
    function HandlePopupResult(result) {
      alert("result of popup is: " + result);
    }
    $(document).ready(function () {
      $("#loginBtn").click(function () {
        if ($('#emailInput').val() && $('#passwordInput').val()) {
				$.post(window.location.protocol + "//" + window.location.hostname + "/demo/oauth", { username: $('#emailInput').val(), password: $('#passwordInput').val() }, function (data) {
          var res = JSON.parse(data);
          if (res.success) {
            if (window.opener) window.opener.HandlePopupResult('send address backed here')
            window.close()
          }
          else alert("invalid login.")
				}, "json");
			}
			else alert("Please enter username and password");
      });
    });
  
  </script>
</body>
</html>
